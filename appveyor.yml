version: 1.0.{build}
image: Visual Studio 2017
platform: Any CPU
dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '{version}'
  package_version: '{version}'
  assembly_version: '{version}'
  file_version: '{version}'
  informational_version: '{version}'
environment:
  ApiKey:
    secure: 0vvD9xkaKen4fUz/3PIi0hbKx6Nyggnvlv8/EOyMtzG/t9T4h/3pdJQJQGa9Tf1z
build_script:
- ps: >-
    dotnet restore
    dotnet build --configuration Release
test_script:
- ps: dotnet test --configuration Release .\WhatIsHeDoing.Core.Tests\WhatIsHeDoing.Core.Tests.csproj
deploy_script:
- ps: nuget push WhatIsHeDoing.Core\bin\Release\WhatIsHeDoing.Core.*.nupkg -ApiKey $env:ApiKey -Source https://www.nuget.org/api/v2/package
